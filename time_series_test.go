package av

import (
	"net/http"
	"testing"
)

func BenchmarkParseTimeSeriesData(b *testing.B) {
	res := &http.Response{
		Body:       NewBuffCloser(sampleTimeSeriesData),
		StatusCode: http.StatusOK,
	}
	for i := 0; i < b.N; i++ {
		if _, err := parseTimeSeriesData(res); err != nil {
			b.Fatalf("error parsing series: %v", err)
		}
	}
}

const (
	sampleTimeSeriesData = `{
    "Meta Data": {
        "1. Information": "Daily Prices (open, high, low, close) and Volumes",
        "2. Symbol": "MSFT",
        "3. Last Refreshed": "2018-01-04",
        "4. Output Size": "Compact",
        "5. Time Zone": "US/Eastern"
    },
    "Time Series (Daily)": {
        "2018-01-04": {
            "1. open": "86.5900",
            "2. high": "87.6600",
            "3. low": "86.5700",
            "4. close": "87.1100",
            "5. volume": "21179500"
        },
        "2018-01-03": {
            "1. open": "86.0600",
            "2. high": "86.5100",
            "3. low": "85.9700",
            "4. close": "86.3500",
            "5. volume": "26061400"
        },
        "2018-01-02": {
            "1. open": "86.1300",
            "2. high": "86.3100",
            "3. low": "85.5000",
            "4. close": "85.9500",
            "5. volume": "22483800"
        },
        "2017-12-29": {
            "1. open": "85.6300",
            "2. high": "86.0500",
            "3. low": "85.5000",
            "4. close": "85.5400",
            "5. volume": "18717400"
        },
        "2017-12-28": {
            "1. open": "85.9000",
            "2. high": "85.9300",
            "3. low": "85.5500",
            "4. close": "85.7200",
            "5. volume": "10594300"
        },
        "2017-12-27": {
            "1. open": "85.6500",
            "2. high": "85.9800",
            "3. low": "85.2200",
            "4. close": "85.7100",
            "5. volume": "14678000"
        },
        "2017-12-26": {
            "1. open": "85.3100",
            "2. high": "85.5300",
            "3. low": "85.0300",
            "4. close": "85.4000",
            "5. volume": "9891200"
        },
        "2017-12-22": {
            "1. open": "85.4000",
            "2. high": "85.6300",
            "3. low": "84.9200",
            "4. close": "85.5100",
            "5. volume": "14145800"
        },
        "2017-12-21": {
            "1. open": "86.0500",
            "2. high": "86.1000",
            "3. low": "85.4000",
            "4. close": "85.5000",
            "5. volume": "17990700"
        },
        "2017-12-20": {
            "1. open": "86.2000",
            "2. high": "86.3000",
            "3. low": "84.7100",
            "4. close": "85.5200",
            "5. volume": "23674900"
        },
        "2017-12-19": {
            "1. open": "86.3500",
            "2. high": "86.3500",
            "3. low": "85.2700",
            "4. close": "85.8300",
            "5. volume": "23524800"
        },
        "2017-12-18": {
            "1. open": "87.1200",
            "2. high": "87.5000",
            "3. low": "86.2300",
            "4. close": "86.3800",
            "5. volume": "22283800"
        },
        "2017-12-15": {
            "1. open": "85.2600",
            "2. high": "87.0900",
            "3. low": "84.8800",
            "4. close": "86.8500",
            "5. volume": "53936700"
        },
        "2017-12-14": {
            "1. open": "85.4300",
            "2. high": "85.8700",
            "3. low": "84.5300",
            "4. close": "84.6900",
            "5. volume": "19306000"
        },
        "2017-12-13": {
            "1. open": "85.7400",
            "2. high": "86.0000",
            "3. low": "85.1700",
            "4. close": "85.3500",
            "5. volume": "22062700"
        },
        "2017-12-12": {
            "1. open": "85.3100",
            "2. high": "86.0500",
            "3. low": "85.0800",
            "4. close": "85.5800",
            "5. volume": "23924100"
        },
        "2017-12-11": {
            "1. open": "84.2900",
            "2. high": "85.3700",
            "3. low": "84.1200",
            "4. close": "85.2300",
            "5. volume": "22857900"
        },
        "2017-12-08": {
            "1. open": "83.6300",
            "2. high": "84.5800",
            "3. low": "83.3300",
            "4. close": "84.1600",
            "5. volume": "24489100"
        },
        "2017-12-07": {
            "1. open": "82.5400",
            "2. high": "82.8000",
            "3. low": "82.0000",
            "4. close": "82.4900",
            "5. volume": "23184500"
        },
        "2017-12-06": {
            "1. open": "81.5500",
            "2. high": "83.1400",
            "3. low": "81.4300",
            "4. close": "82.7800",
            "5. volume": "26162100"
        },
        "2017-12-05": {
            "1. open": "81.3400",
            "2. high": "82.6800",
            "3. low": "80.9800",
            "4. close": "81.5900",
            "5. volume": "26152300"
        },
        "2017-12-04": {
            "1. open": "84.4200",
            "2. high": "84.4300",
            "3. low": "80.7000",
            "4. close": "81.0800",
            "5. volume": "39094900"
        },
        "2017-12-01": {
            "1. open": "83.6000",
            "2. high": "84.8100",
            "3. low": "83.2200",
            "4. close": "84.2600",
            "5. volume": "29532100"
        },
        "2017-11-30": {
            "1. open": "83.5100",
            "2. high": "84.5200",
            "3. low": "83.3400",
            "4. close": "84.1700",
            "5. volume": "33054600"
        },
        "2017-11-29": {
            "1. open": "84.7100",
            "2. high": "84.9200",
            "3. low": "83.1800",
            "4. close": "83.3400",
            "5. volume": "27381100"
        },
        "2017-11-28": {
            "1. open": "84.0700",
            "2. high": "85.0600",
            "3. low": "84.0200",
            "4. close": "84.8800",
            "5. volume": "21926000"
        },
        "2017-11-27": {
            "1. open": "83.3100",
            "2. high": "83.9800",
            "3. low": "83.3000",
            "4. close": "83.8700",
            "5. volume": "18265200"
        },
        "2017-11-24": {
            "1. open": "83.0100",
            "2. high": "83.4300",
            "3. low": "82.7800",
            "4. close": "83.2600",
            "5. volume": "7425600"
        },
        "2017-11-22": {
            "1. open": "83.8300",
            "2. high": "83.9000",
            "3. low": "83.0400",
            "4. close": "83.1100",
            "5. volume": "20553100"
        },
        "2017-11-21": {
            "1. open": "82.7400",
            "2. high": "83.8400",
            "3. low": "82.7400",
            "4. close": "83.7200",
            "5. volume": "21237500"
        },
        "2017-11-20": {
            "1. open": "82.4000",
            "2. high": "82.5900",
            "3. low": "82.2500",
            "4. close": "82.5300",
            "5. volume": "16315000"
        },
        "2017-11-17": {
            "1. open": "83.1200",
            "2. high": "83.1200",
            "3. low": "82.2400",
            "4. close": "82.4000",
            "5. volume": "22079000"
        },
        "2017-11-16": {
            "1. open": "83.1000",
            "2. high": "83.4200",
            "3. low": "82.9400",
            "4. close": "83.2000",
            "5. volume": "20962800"
        },
        "2017-11-15": {
            "1. open": "83.4700",
            "2. high": "83.6900",
            "3. low": "82.6900",
            "4. close": "82.9800",
            "5. volume": "19383100"
        },
        "2017-11-14": {
            "1. open": "83.5000",
            "2. high": "84.1000",
            "3. low": "82.9800",
            "4. close": "83.6300",
            "5. volume": "18801300"
        },
        "2017-11-13": {
            "1. open": "83.6600",
            "2. high": "83.9400",
            "3. low": "83.4600",
            "4. close": "83.5106",
            "5. volume": "14196900"
        },
        "2017-11-10": {
            "1. open": "83.7900",
            "2. high": "84.1000",
            "3. low": "83.2300",
            "4. close": "83.4509",
            "5. volume": "19397800"
        },
        "2017-11-09": {
            "1. open": "84.1100",
            "2. high": "84.2700",
            "3. low": "82.9000",
            "4. close": "83.6698",
            "5. volume": "21178400"
        },
        "2017-11-08": {
            "1. open": "84.1400",
            "2. high": "84.6100",
            "3. low": "83.8300",
            "4. close": "84.1375",
            "5. volume": "18034200"
        },
        "2017-11-07": {
            "1. open": "84.7700",
            "2. high": "84.9000",
            "3. low": "83.9300",
            "4. close": "83.8489",
            "5. volume": "17939700"
        },
        "2017-11-06": {
            "1. open": "84.2000",
            "2. high": "84.7000",
            "3. low": "84.0800",
            "4. close": "84.0479",
            "5. volume": "19860900"
        },
        "2017-11-03": {
            "1. open": "84.0800",
            "2. high": "84.5400",
            "3. low": "83.4000",
            "4. close": "83.7196",
            "5. volume": "17633500"
        },
        "2017-11-02": {
            "1. open": "83.3500",
            "2. high": "84.4600",
            "3. low": "83.1200",
            "4. close": "83.6300",
            "5. volume": "23992900"
        },
        "2017-11-01": {
            "1. open": "83.6800",
            "2. high": "83.7600",
            "3. low": "82.8800",
            "4. close": "82.7644",
            "5. volume": "22307400"
        },
        "2017-10-31": {
            "1. open": "84.3600",
            "2. high": "84.3600",
            "3. low": "83.1100",
            "4. close": "82.7644",
            "5. volume": "27086600"
        },
        "2017-10-30": {
            "1. open": "83.7000",
            "2. high": "84.3300",
            "3. low": "83.1100",
            "4. close": "83.4708",
            "5. volume": "31756700"
        },
        "2017-10-27": {
            "1. open": "84.3700",
            "2. high": "86.2000",
            "3. low": "83.6100",
            "4. close": "83.3912",
            "5. volume": "71066700"
        },
        "2017-10-26": {
            "1. open": "79.2000",
            "2. high": "79.4200",
            "3. low": "78.7500",
            "4. close": "78.3664",
            "5. volume": "32120700"
        },
        "2017-10-25": {
            "1. open": "78.5800",
            "2. high": "79.1000",
            "3. low": "78.0100",
            "4. close": "78.2371",
            "5. volume": "20410800"
        },
        "2017-10-24": {
            "1. open": "78.9000",
            "2. high": "79.2000",
            "3. low": "78.4600",
            "4. close": "78.4659",
            "5. volume": "17517200"
        },
        "2017-10-23": {
            "1. open": "78.9900",
            "2. high": "79.3400",
            "3. low": "78.7600",
            "4. close": "78.4361",
            "5. volume": "20627200"
        },
        "2017-10-20": {
            "1. open": "78.3200",
            "2. high": "78.9700",
            "3. low": "78.2200",
            "4. close": "78.4162",
            "5. volume": "22866400"
        },
        "2017-10-19": {
            "1. open": "77.5700",
            "2. high": "77.9300",
            "3. low": "77.3500",
            "4. close": "77.5207",
            "5. volume": "15092800"
        },
        "2017-10-18": {
            "1. open": "77.6700",
            "2. high": "77.8500",
            "3. low": "77.3700",
            "4. close": "77.2222",
            "5. volume": "13300700"
        },
        "2017-10-17": {
            "1. open": "77.4700",
            "2. high": "77.6200",
            "3. low": "77.2500",
            "4. close": "77.2023",
            "5. volume": "16824000"
        },
        "2017-10-16": {
            "1. open": "77.4200",
            "2. high": "77.8100",
            "3. low": "77.3500",
            "4. close": "77.2620",
            "5. volume": "12380100"
        },
        "2017-10-13": {
            "1. open": "77.5900",
            "2. high": "77.8700",
            "3. low": "77.2900",
            "4. close": "77.1028",
            "5. volume": "15335700"
        },
        "2017-10-12": {
            "1. open": "76.4900",
            "2. high": "77.2900",
            "3. low": "76.3700",
            "4. close": "76.7346",
            "5. volume": "16876500"
        },
        "2017-10-11": {
            "1. open": "76.3600",
            "2. high": "76.4600",
            "3. low": "75.9500",
            "4. close": "76.0381",
            "5. volume": "15388900"
        },
        "2017-10-10": {
            "1. open": "76.3300",
            "2. high": "76.6300",
            "3. low": "76.1400",
            "4. close": "75.9088",
            "5. volume": "13944500"
        },
        "2017-10-09": {
            "1. open": "75.9700",
            "2. high": "76.5500",
            "3. low": "75.8600",
            "4. close": "75.9088",
            "5. volume": "11386500"
        },
        "2017-10-06": {
            "1. open": "75.6700",
            "2. high": "76.0300",
            "3. low": "75.5400",
            "4. close": "75.6202",
            "5. volume": "13959800"
        },
        "2017-10-05": {
            "1. open": "75.2200",
            "2. high": "76.1200",
            "3. low": "74.9600",
            "4. close": "75.5904",
            "5. volume": "21195300"
        },
        "2017-10-04": {
            "1. open": "74.0900",
            "2. high": "74.7200",
            "3. low": "73.7100",
            "4. close": "74.3168",
            "5. volume": "13317700"
        },
        "2017-10-03": {
            "1. open": "74.6700",
            "2. high": "74.8800",
            "3. low": "74.1900",
            "4. close": "73.8889",
            "5. volume": "12190400"
        },
        "2017-10-02": {
            "1. open": "74.7100",
            "2. high": "75.0100",
            "3. low": "74.3000",
            "4. close": "74.2372",
            "5. volume": "15304800"
        },
        "2017-09-29": {
            "1. open": "73.9400",
            "2. high": "74.5400",
            "3. low": "73.8800",
            "4. close": "74.1178",
            "5. volume": "17079100"
        },
        "2017-09-28": {
            "1. open": "73.5400",
            "2. high": "73.9700",
            "3. low": "73.3100",
            "4. close": "73.5009",
            "5. volume": "10883800"
        },
        "2017-09-27": {
            "1. open": "73.5500",
            "2. high": "74.1700",
            "3. low": "73.1700",
            "4. close": "73.4810",
            "5. volume": "19565100"
        },
        "2017-09-26": {
            "1. open": "73.6700",
            "2. high": "73.8100",
            "3. low": "72.9900",
            "4. close": "72.8939",
            "5. volume": "18019600"
        },
        "2017-09-25": {
            "1. open": "74.0900",
            "2. high": "74.2500",
            "3. low": "72.9200",
            "4. close": "72.8939",
            "5. volume": "24149200"
        },
        "2017-09-22": {
            "1. open": "73.9900",
            "2. high": "74.5100",
            "3. low": "73.8500",
            "4. close": "74.0382",
            "5. volume": "14111400"
        },
        "2017-09-21": {
            "1. open": "75.1100",
            "2. high": "75.2400",
            "3. low": "74.1100",
            "4. close": "73.8392",
            "5. volume": "19186100"
        },
        "2017-09-20": {
            "1. open": "75.3500",
            "2. high": "75.5500",
            "3. low": "74.3100",
            "4. close": "74.5655",
            "5. volume": "21587900"
        },
        "2017-09-19": {
            "1. open": "75.2100",
            "2. high": "75.7100",
            "3. low": "75.0100",
            "4. close": "75.0630",
            "5. volume": "16093300"
        },
        "2017-09-18": {
            "1. open": "75.2300",
            "2. high": "75.9700",
            "3. low": "75.0400",
            "4. close": "74.7844",
            "5. volume": "23307000"
        },
        "2017-09-15": {
            "1. open": "74.8300",
            "2. high": "75.3900",
            "3. low": "74.0700",
            "4. close": "74.9337",
            "5. volume": "38578400"
        },
        "2017-09-14": {
            "1. open": "75.0000",
            "2. high": "75.4900",
            "3. low": "74.5200",
            "4. close": "74.3964",
            "5. volume": "15733900"
        },
        "2017-09-13": {
            "1. open": "74.9300",
            "2. high": "75.2300",
            "3. low": "74.5500",
            "4. close": "74.8342",
            "5. volume": "13380800"
        },
        "2017-09-12": {
            "1. open": "74.7600",
            "2. high": "75.2400",
            "3. low": "74.3700",
            "4. close": "74.3068",
            "5. volume": "14394900"
        },
        "2017-09-11": {
            "1. open": "74.3100",
            "2. high": "74.9400",
            "3. low": "74.3100",
            "4. close": "74.3864",
            "5. volume": "17910400"
        },
        "2017-09-08": {
            "1. open": "74.3300",
            "2. high": "74.4400",
            "3. low": "73.8400",
            "4. close": "73.6103",
            "5. volume": "14703800"
        },
        "2017-09-07": {
            "1. open": "73.6800",
            "2. high": "74.6000",
            "3. low": "73.6000",
            "4. close": "73.9685",
            "5. volume": "17471200"
        },
        "2017-09-06": {
            "1. open": "73.7400",
            "2. high": "74.0400",
            "3. low": "73.3500",
            "4. close": "73.0332",
            "5. volume": "16535800"
        },
        "2017-09-05": {
            "1. open": "73.3400",
            "2. high": "73.8900",
            "3. low": "72.9800",
            "4. close": "73.2422",
            "5. volume": "21556000"
        },
        "2017-09-01": {
            "1. open": "74.7100",
            "2. high": "74.7400",
            "3. low": "73.6400",
            "4. close": "73.5705",
            "5. volume": "21736200"
        },
        "2017-08-31": {
            "1. open": "74.0300",
            "2. high": "74.9600",
            "3. low": "73.8000",
            "4. close": "74.3964",
            "5. volume": "27652800"
        },
        "2017-08-30": {
            "1. open": "73.0100",
            "2. high": "74.2100",
            "3. low": "72.8300",
            "4. close": "73.6402",
            "5. volume": "16897800"
        },
        "2017-08-29": {
            "1. open": "72.2500",
            "2. high": "73.1600",
            "3. low": "72.0500",
            "4. close": "72.6850",
            "5. volume": "11478400"
        },
        "2017-08-28": {
            "1. open": "73.0600",
            "2. high": "73.0900",
            "3. low": "72.5500",
            "4. close": "72.4661",
            "5. volume": "14569700"
        },
        "2017-08-25": {
            "1. open": "72.8600",
            "2. high": "73.3500",
            "3. low": "72.4800",
            "4. close": "72.4561",
            "5. volume": "12794300"
        },
        "2017-08-24": {
            "1. open": "72.7400",
            "2. high": "72.8600",
            "3. low": "72.0700",
            "4. close": "72.3268",
            "5. volume": "17098300"
        },
        "2017-08-23": {
            "1. open": "72.9600",
            "2. high": "73.1500",
            "3. low": "72.5300",
            "4. close": "72.3566",
            "5. volume": "13766500"
        },
        "2017-08-22": {
            "1. open": "72.3500",
            "2. high": "73.2400",
            "3. low": "72.3500",
            "4. close": "72.7944",
            "5. volume": "14343700"
        },
        "2017-08-21": {
            "1. open": "72.4700",
            "2. high": "72.4800",
            "3. low": "71.7000",
            "4. close": "71.7895",
            "5. volume": "17734800"
        },
        "2017-08-18": {
            "1. open": "72.2700",
            "2. high": "72.8400",
            "3. low": "71.9300",
            "4. close": "72.1278",
            "5. volume": "18761500"
        },
        "2017-08-17": {
            "1. open": "73.5800",
            "2. high": "73.8700",
            "3. low": "72.4000",
            "4. close": "72.0382",
            "5. volume": "22977500"
        },
        "2017-08-16": {
            "1. open": "73.3400",
            "2. high": "74.1000",
            "3. low": "73.1700",
            "4. close": "73.2820",
            "5. volume": "18150400"
        },
        "2017-08-15": {
            "1. open": "73.5900",
            "2. high": "73.5900",
            "3. low": "73.0400",
            "4. close": "72.8541",
            "5. volume": "19181400"
        },
        "2017-08-14": {
            "1. open": "73.0600",
            "2. high": "73.7200",
            "3. low": "72.9500",
            "4. close": "72.8342",
            "5. volume": "20067300"
        }
    }
}`
)
